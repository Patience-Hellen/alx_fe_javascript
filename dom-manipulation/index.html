<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quotes with Category Filter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    select, input, button {
      margin: 5px 0;
      padding: 5px;
    }
    .quote {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
    }
    .category {
      font-size: 0.9em;
      color: #666;
    }
  </style>
</head>
<body>

  <h1>Quotes App</h1>

  <!-- Category Filter -->
  <label for="categoryFilter">Filter by Category:</label>
  <select id="categoryFilter" onchange="filterQuotes()">
    <option value="all">All Categories</option>
    <!-- Populated dynamically -->
  </select>

  <h2>Add a New Quote</h2>
  <input type="text" id="quoteText" placeholder="Enter quote" style="width: 300px;"><br>
  <input type="text" id="quoteCategory" placeholder="Enter category"><br>
  <button onclick="addQuote()">Add Quote</button>

  <h2>Quotes</h2>
  <div id="quotesList"></div>

  <script>
    // Initial quotes
    let quotes = JSON.parse(localStorage.getItem("quotes")) || [
      { text: "The best way to get started is to quit talking and begin doing.", category: "Motivation" },
      { text: "Success is not the key to happiness. Happiness is the key to success.", category: "Happiness" },
      { text: "Your limitation—it’s only your imagination.", category: "Inspiration" }
    ];

    // Populate dropdown with unique categories
    function populateCategories() {
      const categoryFilter = document.getElementById("categoryFilter");
      const selectedCategory = localStorage.getItem("selectedCategory") || "all";
      
      // Get unique categories
      const categories = ["all", ...new Set(quotes.map(q => q.category))];

      // Clear dropdown before repopulating
      categoryFilter.innerHTML = "";

      // Populate dropdown
      categories.forEach(category => {
        const option = document.createElement("option");
        option.value = category;
        option.textContent = category;
        if (category === selectedCategory) {
          option.selected = true;
        }
        categoryFilter.appendChild(option);
      });
    }

    // Display quotes
    function displayQuotes(filteredQuotes) {
      const quotesList = document.getElementById("quotesList");
      quotesList.innerHTML = "";
      filteredQuotes.forEach(q => {
        const quoteDiv = document.createElement("div");
        quoteDiv.classList.add("quote");
        quoteDiv.innerHTML = `<strong>${q.text}</strong><div class="category">Category: ${q.category}</div>`;
        quotesList.appendChild(quoteDiv);
      });
    }

    // Filter quotes based on selected category
    function filterQuotes() {
      const category = document.getElementById("categoryFilter").value;
      localStorage.setItem("selectedCategory", category);
      if (category === "all") {
        displayQuotes(quotes);
      } else {
        displayQuotes(quotes.filter(q => q.category === category));
      }
    }

    // Add a new quote and update categories
    function addQuote() {
      const text = document.getElementById("quoteText").value.trim();
      const category = document.getElementById("quoteCategory").value.trim();
      if (!text || !category) {
        alert("Please enter both a quote and a category.");
        return;
      }

      quotes.push({ text, category });
      localStorage.setItem("quotes", JSON.stringify(quotes));

      document.getElementById("quoteText").value = "";
      document.getElementById("quoteCategory").value = "";

      populateCategories();
      filterQuotes();
    }

    // Restore category on page load and display quotes
    window.onload = function () {
      populateCategories();
      filterQuotes();
    };
  </script>

</body>
</html>
